.. post:: 2024-12-02
   :tags: Ubuntu, Linux, resonite, VR
   :category: "IT technology"
   :author: usaturn
   :location: Japan
   :language: ja

.. _about_a_resonite_headless_server_on_compute_engine:

=========================================================
resonite ヘッドレスサーバを Google Cloud で建てるオススメ
=========================================================

`(2枚目) Resonite Advent Calendar 2024 <https://adventar.org/calendars/10544>`__ 2日目の記事です

この記事は resonite_ の
`Headless Client(通称ヘッドレスサーバと呼ばれている為、以下ヘッドレスサーバと記載します) <https://wiki.resonite.com/Headless_Client>`__
を動かすなら `Google Cloud`_ がオススメだよ、という内容です。

誰向けの記事？
==============

下記に当てはまる方向けです。

- resonite_ を常用していて Linux でヘッドレスサーバを建てたいと考えている方
- `Google Cloud`_ に興味がある方

クラウドを推す理由
==================

まず、 `Google Cloud`_ の前にパブリッククラウド全般に言えることです。

- 自宅に物理サーバを確保する必要がありません
- クラウドの安定した十分な帯域の回線を利用できます
- スケジュールを設定して自動起動／自動停止ができます

逆にデメリットとして、下記が挙げられます。

- 価格が高めで使っただけ請求される従量課金のため、常時起動には向きません
- ある程度学習が必要です

`Google Cloud`_ を推す理由
==========================

個人的に Google Cloud は 3 大パブリッククラウドの中で一番扱いやすいと考えてます（個人の感想です）。
使いやすさを感じる一番大きな部分はプロジェクトの概念です。
1つの契約で、プロジェクトを複数作成し、簡単に削除ができるのは趣味レベルで試行錯誤する人にとっては都合が良いです。

明日から構築する環境
====================

その他、明日以降の記事で構築する環境は以下の特徴があります。

- `Google Cloud`_ のネットワーク上に構築であれば、最低でも 7Gbps という十分な帯域が確保できます
- 起動中のヘッドレスサーバに接続して対話シェルを操作できます
- インスタンス停止時にヘッドレスサーバの config を書き換えることができます
- 一度に同様の構成のサーバを複数台用意することができます

セキュリティに配慮しやすいです。

- VPC ファイアウォールでヘッドレスサーバの forcePort のみを受け付ける設定にできます
- インターネット側から直接 ssh させず IAP という仕組みで ssh できます

.. _about_build_sesrver:

構築する Compute Engine のインスタンス（VM＝仮想マシン）について

  - 必要な時だけインスタンス（サーバ）を起動する想定で、常時起動には向きません（常時起動してもいいけど料金が高いです）
  - ネットワーク回線が最低でも 7Gbps(約875MB/s)出ます
  - 簡単に起動／停止、複製ができます
  - 自動起動、自動停止をスケジュールできます
  - シャットダウン時にヘッドレスサーバのキャッシュを削除します（容量を喰う為）
  - パブリック（グローバル）IPアドレスを割り当てますが、固定 IP アドレスは確保しません
  - 秘匿情報を格納する `Secret Manager`_ シークレットをインスタンスごとに作る必要がある

ヘッドレスサーバの構築について

  - インスタンス起動時に、自動的にヘッドレスサーバを起動します
  - 起動時にヘッドレスサーバを自動アップデートします
  - 簡単に構築して、少ない手間で作り直しができます（可能であれば数か月ごとに構築しなおした方が良いです）
  - 自動起動後でも、簡単に ssh して、ヘッドレスサーバの対話シェルに繋ぐことができます


:ref:`明日の記事 <set_up_a_resonite_headless_server_on_compute_engine>` へ続きます。

.. include:: /contents/include_files/resonite_headless_link.txt
